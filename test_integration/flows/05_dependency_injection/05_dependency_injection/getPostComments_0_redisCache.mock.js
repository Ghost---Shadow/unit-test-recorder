module.exports =
  'function injectedFunction(...paramsOfInjected) {\n      // https://stackoverflow.com/a/31060154/1217998\n      if (new.target) {\n        markForConstructorInjection(meta); // https://stackoverflow.com/a/47469377/1217998\n\n        return new OldFp(...paramsOfInjected);\n      }\n\n      const clonedParams = shouldRecordStubParams() ? _.cloneDeep(paramsOfInjected) : [];\n      const result = OldFp.apply(this, paramsOfInjected);\n\n      if (result && _.isFunction(result.then)) {\n        // It might be a promise\n        result.then(res => {\n          injectedFunction.boundRecorder(clonedParams, res);\n        });\n      } else {\n        injectedFunction.boundRecorder(clonedParams, result);\n      }\n\n      return result;\n    }';
